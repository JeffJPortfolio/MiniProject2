<!DOCTYPE html>
<html lang="ko">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>상품 구매</title>
    <link href="../../assets/css/common.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/reset.css" rel="stylesheet" type="text/css">
    <link href="../../assets/css/goods.css" rel="stylesheet" type="text/css">
</head>

<body>
    <div id="wrap">
        <div id="header" class="clearfix">
            <h1 class="header-inner">
                <a href="#"><img src="../../assets/img/icon/logo.png"></a>
            </h1>

            <!-- 로그인했을때 -->
            <c:if test="${sessionScope.authUser != null}">
                <ul>
                    <li><span id="welcome">고객 님 안녕하세요^^</span></li>
                    <li><a href="" class="btn_s"><img src="../../assets/img/icon/logout_1.png" alt="log-out"
                                title="로그아웃"></a></li>
                    <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_cart.png" alt="cart"
                                title="장바구니"></a></li>
                    <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_gnb_customer.png" alt="qna"
                                title="문의사항"></a></li>
                    <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_gnb_mypage.png" alt="mypage"
                                title="마이페이지"></a></li>
                </ul>
            </c:if>

            <!-- 로그인 안했을때 -->
            <c:if test="${sessionScope.authUser == null}">
                <!-- <ul>
                <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_cart_c.png"></a></li>
                <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_gnb_customer_c.png"></a></li>
                <li><a href="" class="btn_s"><img src="../../assets/img/icon/btn_gnb_mypage_c.png"></a></li>
            </ul> -->
            </c:if>
        </div>
        <!-- //header -->

        <div id="product-container">
            <!-- 상품 이미지 및 정보 -->
            <div id="product-info">
                <!-- 상품 이미지 -->
                <div class="product-image">
                    <img id="productImage" src="../../assets/img/hybrid30cce/hybrid30cce_brown.jpg" alt="상품 이미지">
                </div>

                <!-- 상품 상세 정보 -->
                <div class="product-details">
                    <h1>하이브리드 3.0 카고컨테이너 에디션</h1>
                    <p class="product-price">99,000원</p>

                    <!-- 색상 선택 -->
                    <!-- 색상 선택 -->
                    <div class="product-colors">
                        <span>색상:</span>
                        <div class="color-options">
                            <div class="color-circle" style="background-color: #d4b484;"
                                onclick="changeImage('sand-beige')">
                            </div>
                            <div class="color-circle" style="background-color: #4e4a2e;" 
                                onclick="changeImage('olive')">
                            </div>
                        </div>
                    </div>

                    <!-- 수량 선택 -->
                    <div class="quantity-selection">
                        <span>수량</span>
                        <div class="quantity-controls">
                            <button class="quantity-btn" onclick="decreaseQuantity()">&#60;</button>
                            <input type="number" id="quantity" value="1" min="1" onchange="updatePrice()">
                            <button class="quantity-btn" onclick="increaseQuantity()">&#62;</button>
                        </div>
                    </div>

                    <!-- 가격 정보 -->
                    <div class="total-price">
                        <span>가격</span>
                        <p id="totalPrice">99,000원</p> <!-- 총 가격이 표시될 곳 -->
                    </div>


                    <!-- 구매 버튼 -->
                    <div class="purchase-button">
                        <button>장바구니에 담기</button>
                    </div>
                </div>
            </div>
            <!-- //상품 이미지 및 정보 -->
            <!-- 상품 상세 이미지-->
            <div id="product-contents"></div>
            <div class="product-image-container">
                <img src="../../assets/img/hybrid30cce/hybrid30cce_content.jpg" alt="설명이미지">
            </div>
        </div>
        <!-- //상품 상세 이미지-->

        <div id="modal" class="modal">
            <div class="modal-content">
                <span class="close" id="closeModal">&times;</span>
                <img src="../../assets/img/icon/lil_basket (1).png" alt="장바구니 아이콘" class="modal-image">
                <p>장바구니에 상품이 정상적으로 담겼습니다</p>
                <div class="modal-buttons">
                    <button id="continueShopping" class="btn-blue">계속 쇼핑하기</button>
                    <button id="goToCart" class="btn-yellow"><a href="">장바구니 이동</a></button>
                </div>
            </div>
        </div>

        <!-- footer -->
        <div id="footer">
            <div id="footer_l">
                <p>서울시 서초구 강남대로 405 통영빌딩 8층</p>
                <p>상호명:(주)ElecCigaMarket 대표자 : 황일영</p>
                <p>사업자 등록번호 : 506 - 79 - 45687</p>
                <p>Copyright ⓒ 2024 하이미디어 All right reserved</p>
            </div>
            <div id="footer_r">
                <p>주문 취소/교환 불가합니다^^</p>
                <p>게시판문의(전화상담은 운영하지 않습니다)</p>
                <p>평일 12:00~16:00</p>
                <p>1588-7585</p>
            </div>
        </div>
        <!-- //footer -->
    </div>


    <script>
        // 기본 단가 설정
        const unitPrice = 99000; // 상품의 기본 가격 (단가)

        // 수량 감소 함수
        function decreaseQuantity() {
            const quantityInput = document.getElementById("quantity");
            if (quantityInput.value > 1) {
                quantityInput.value--;
                updatePrice(); // 수량 변경 후 가격 업데이트
            }
        }

        // 수량 증가 함수
        function increaseQuantity() {
            const quantityInput = document.getElementById("quantity");
            quantityInput.value++;
            updatePrice(); // 수량 변경 후 가격 업데이트
        }

        // 가격 업데이트 함수
        function updatePrice() {
            const quantity = document.getElementById("quantity").value;
            const totalPriceElement = document.getElementById("totalPrice");

            // 총 가격 계산
            const totalPrice = unitPrice * quantity;

            // 총 가격을 "99,000원" 형식으로 표시
            totalPriceElement.textContent = totalPrice.toLocaleString() + "원";
        }

        // 색상에 맞게 이미지를 변경하는 함수
        function changeImage(color) {
            const productImage = document.getElementById('productImage');

            // 색상에 따라 이미지 경로 설정 (슬래시 사용)
            if (color === 'sand-beige') {
                productImage.src = '../../assets/img/hybrid30cce/hybrid30cce_brown.jpg'; // 샌드 베이지 색 이미지 경로
            } else if (color === 'olive') {
                productImage.src = '../../assets/img/hybrid30cce/hybrid30cce_khaki.jpeg'; // 올리브 색 이미지 경로
            }
        }


        // 모달 엘리먼트 선택
        const modal = document.getElementById("modal");
        const closeModal = document.getElementById("closeModal");
        const continueShopping = document.getElementById("continueShopping");
        const goToCart = document.getElementById("goToCart");

        // 장바구니에 담기 버튼 클릭 시 모달 열기
        document.querySelector(".purchase-button button").addEventListener("click", function () {
            modal.style.display = "flex"; // 모달을 화면에 표시
        });

        // 모달 닫기 버튼 클릭 시 모달 닫기
        closeModal.addEventListener("click", function () {
            modal.style.display = "none"; // 모달을 닫음
        });

        // 계속 쇼핑하기 버튼 클릭 시 모달 닫기
        continueShopping.addEventListener("click", function () {
            modal.style.display = "none"; // 모달을 닫음
        });

        // 장바구니 이동 버튼 클릭 시 장바구니 페이지로 이동
        goToCart.addEventListener("click", function () {
            window.location.href = "/cart"; // 장바구니 페이지로 리다이렉트
        });

        // 모달 바깥쪽 클릭 시 모달 닫기
        window.addEventListener("click", function (event) {
            if (event.target == modal) {
                modal.style.display = "none"; // 모달 바깥을 클릭하면 닫음
            }
        });

    </script>
</body>

</html>